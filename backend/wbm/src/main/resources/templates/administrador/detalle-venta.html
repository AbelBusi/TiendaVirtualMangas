<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{administrador/admin-ventas :: head}"></head>

<body th:style="'background-image: url(' + @{/media/images/iconos/fondoBpdy.jpg} + ')'">

<div id="app">
  <div th:replace="~{components/header :: siderAdmin}"></div>

  <div id="main">
    <header class="mb-3">
      <a href="#" class="burger-btn d-block d-xl-none">
        <i class="bi bi-justify fs-3"></i>
      </a>
    </header>

    <div class="page-heading">
      <div class="page-title">
        <div class="row">
          <div class="col-12 col-md-6 order-md-1 order-last">
            <h3 class="text-white">DETALLE DE VENTA #<span th:text="${venta.numeroVenta}"></span></h3>
            <a th:href="@{/administrador/ventas}" class="btn btn-sm btn-light mt-2"><i class="fas fa-arrow-left"></i> Volver a Ventas</a>
          </div>
          <div class="col-12 col-md-6 order-md-2 order-first">
            <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/administrador/dashboard}">Dashboard</a></li>
                <li class="breadcrumb-item"><a th:href="@{/administrador/ventas}">Ventas</a></li>
                <li class="breadcrumb-item active" aria-current="page">Detalle</li>
              </ol>
            </nav>
          </div>
        </div>
      </div>

      <section class="section mt-3">
        <div class="card bg-transparent border-0">
          <div class="card-body">
            <div class="row mb-4">
              <div class="col-md-4">
                <p class="text-white"><strong>ID Venta:</strong> <span th:text="${venta.idVenta}"></span></p>
              </div>
              <div class="col-md-4">
                <p class="text-white"><strong>Cliente:</strong> <span th:text="${venta.usuario.persona.nombre + ' ' + venta.usuario.persona.apellidos}"></span></p>
              </div>
              <div class="col-md-4">
                <p class="text-white"><strong>Fecha Venta:</strong> <span th:text="${#temporals.format(venta.fechaVenta, 'dd/MM/yyyy HH:mm')}"></span></p>
              </div>
            </div>

            <h4 class="card-title text-white mt-4 mb-3"><i class="fas fa-list-alt"></i> Productos Vendidos</h4>

            <div class="table-responsive">
              <table class="table table-transparent table-striped">
                <thead>
                <tr>
                  <th>Portada</th>
                  <th>E-Manga</th>
                  <th>Precio U.</th>
                  <th>Cantidad</th>
                  <th>Subtotal</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="detalle : ${detalles}">
                  <td>
                    <img th:src="@{'/media/images/store/' + ${detalle.libro.portadaUrl}}" alt="Portada" style="width: 50px; height: 75px; object-fit: cover;">
                  </td>
                  <td th:text="${detalle.libro.titulo}"></td>
                  <td th:text="${#numbers.formatDecimal(detalle.precio, 0, 'COMMA', 2, 'POINT')}"></td>
                  <td th:text="${detalle.cantidad}"></td>
                  <td th:text="${#numbers.formatDecimal(detalle.total, 0, 'COMMA', 2, 'POINT')}"></td>
                </tr>
                </tbody>
                <tfoot>
                <tr>
                  <th colspan="4" class="text-end text-white">Sub Total:</th>
                  <th class="text-white" th:text="${#numbers.formatDecimal(venta.subTotal, 0, 'COMMA', 2, 'POINT')}">0.00</th>
                </tr>
                <tr>
                  <th colspan="4" class="text-end text-white">IGV:</th>
                  <th class="text-white" th:text="${#numbers.formatDecimal(venta.igv, 0, 'COMMA', 2, 'POINT')}">0.00</th>
                </tr>
                <tr>
                  <th colspan="4" class="text-end fw-bold text-white">TOTAL VENTA:</th>
                  <th class="text-warning fw-bold" th:text="${#numbers.formatDecimal(venta.total, 0, 'COMMA', 2, 'POINT')}">0.00</th>
                </tr>
                </tfoot>
              </table>
            </div>

          </div>
        </div>
      </section>
    </div>

    <footer th:replace="~{administrador/admin-ventas :: footer}"></footer>
  </div>
</div>

<div th:replace="~{administrador/admin-ventas :: scripts}"></div>

</body>
</html>